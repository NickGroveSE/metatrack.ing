---
import type { SvgComponent } from 'astro/types';

import GithubInvertocatLight from '../assets/GitHub_Invertocat_Light.svg';
import GithubLockupLight from '../assets/GitHub_Lockup_Light.svg';
import DiscordSymbolBlurple from '../assets/Discord-Symbol-Blurple.svg'
import DiscordLogoBlurple from '../assets/Discord-Logo-Blurple.svg'

export interface Props {
  title: string;
  logo: string;
}

const { title, logo } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Astro + Vue Hello World" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href={logo} />
    <title>{title}</title>
  </head>
  <body>
    <header>
      <img src={logo} id="logo"/>
      <a href="/"><h1>metatrack.ing</h1></a>
      <div id="text-nav">
        <a href="https://buy.stripe.com/14A4gz5Embg66D88tO4wM01"><div class="nav-button">Donate</div></a>
        <div id="dropdown">
          <div class="nav-button">Games</div>
          <div id="dropdown-content">
            <a href="/overwatch">Overwatch</a>
            <a href="/deadlock">Deadlock</a>
          </div>
        </div>
        <a href="https://github.com/NickGroveSE/metatrack.ing"><img src={GithubInvertocatLight.src} class="nav-img"/></a>
        <a href="https://discord.gg/nhpjrx4P"><img src={DiscordSymbolBlurple.src} class="nav-img"/></a>
        <!-- <a href="/about"><div class="nav-button">About</div></a> -->
      </div>
      <button id="hamburger" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </header>
    
    <div id="mobile-sidebar">
      <a href="https://buy.stripe.com/14A4gz5Embg66D88tO4wM01" class="mobile-nav-item">Donate</a>
      <div class="mobile-dropdown">
        <div class="mobile-nav-item mobile-dropdown-trigger">Games</div>
        <div class="mobile-dropdown-content">
          <a href="/overwatch?queue=0&role=Support&region=Americas&input=PC&rank=All&map=all-maps">Overwatch</a>
        </div>
      </div>
      <a href="https://github.com/NickGroveSE/metatrack.ing"><img src={GithubLockupLight.src} class="mobile-nav-img"/></a>
      <a href="https://discord.gg/nhpjrx4P"><img src={DiscordLogoBlurple.src} class="mobile-nav-img"/></a>
      <!-- <a href="/about" class="mobile-nav-item">About</a> -->
    </div>
    
    <div id="overlay"></div>
    
    <slot />
  </body>
</html>

<style is:global>
  html {
    font-family: system-ui, sans-serif;
  }
  
  body {
    margin: 0;
    background: #111827;
    min-height: 100vh;
  }
  
  * {
    box-sizing: border-box;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }

  *::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }

  header {
    height: 80px;
    background-color: #111827;
    border-bottom: 5px solid #fbbf24;
    align-items: center;
    padding: 0 50px 0 30px;
    width: 100%;
    display: flex;
    overflow: visible;
    position: relative;
    z-index: 1000;
  }

  #logo {
    width: auto;
    height: 60px;
    display: block;
  }

  h1 {
    padding: 0 10px 5px 10px;
    color: #fbbf24;
  }

  #text-nav {
    display: flex;
    margin-left: auto;
    color: #fbbf24;
    font-weight: 700;
    height: 100%;
  }

  a {
    text-decoration: none;
  }

  .nav-button {
    line-height: 45px;
    padding: 15px 15px;
    transition: all 0.3s ease;
    cursor: pointer;
    color: #fbbf24;
    font-size: 18px;
  }

  .nav-img {
    transition: all 0.3s ease;
    cursor: pointer;
    padding: 18px 10px;
    height: 75px;
  }

  .nav-button:hover {
    background-color: #fbbf24;
    color: #111827;
  }

  #dropdown {
    position: relative;
    overflow: visible;
  }

  #dropdown-content {
    display: none;
    position: absolute;
    z-index: 1;
    background-color: #374151;
    top: 100%;
  }

  #dropdown-content a {
    float: none;
    color: #fbbf24;
    padding: 15px 15px;
    display: block;
    text-align: left;
    white-space: nowrap;
  }

  #dropdown-content a:hover {
    background-color: #fbbf24;
    color: #111827;
  }

  #dropdown:hover #dropdown-content {
    display: block;
  }

  /* Hamburger menu */
  #hamburger {
    display: none;
    flex-direction: column;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    margin-left: auto;
    width: 30px;
    height: 24px;
    position: relative;
  }

  #hamburger span {
    display: block;
    width: 100%;
    height: 3px;
    background-color: #fbbf24;
    transition: all 0.3s ease;
    position: absolute;
  }

  #hamburger span:nth-child(1) {
    top: 0;
  }

  #hamburger span:nth-child(2) {
    top: 50%;
    transform: translateY(-50%);
  }

  #hamburger span:nth-child(3) {
    bottom: 0;
  }

  #hamburger.active span:nth-child(1) {
    transform: rotate(45deg);
    top: 50%;
  }

  #hamburger.active span:nth-child(2) {
    opacity: 0;
  }

  #hamburger.active span:nth-child(3) {
    transform: rotate(-45deg);
    bottom: 50%;
  }

  /* Mobile sidebar */
  #mobile-sidebar {
    position: fixed;
    top: 0;
    right: -300px;
    width: 300px;
    height: 100vh;
    background-color: #1f2937;
    transition: right 0.3s ease;
    z-index: 1001;
    padding-top: 100px;
    overflow-y: auto;
  }

  #mobile-sidebar.active {
    right: 0;
  }

  .mobile-nav-item {
    display: block;
    color: #fbbf24;
    padding: 20px 30px;
    font-size: 18px;
    font-weight: 700;
    border-bottom: 1px solid #374151;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .mobile-nav-img {
    display: block;
    padding: 20px 30px;
    height: 65px;
  }

  .mobile-nav-item:hover {
    background-color: #374151;
  }

  .mobile-dropdown-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    background-color: #374151;
  }

  .mobile-dropdown.active .mobile-dropdown-content {
    max-height: 200px;
  }

  .mobile-dropdown-content a {
    display: block;
    color: #fbbf24;
    padding: 15px 30px 15px 50px;
    font-size: 16px;
    border-bottom: 1px solid #4b5563;
  }

  .mobile-dropdown-content a:hover {
    background-color: #4b5563;
  }

  /* Overlay */
  #overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    z-index: 999;
  }

  #overlay.active {
    opacity: 1;
    visibility: visible;
  }

  ::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }

  ::-webkit-scrollbar-thumb {
    background: #fbbf24; /* Scrollbar color */
    border-radius: 2px;
  }

  /* Responsive styles */
  @media (max-width: 768px) {
    header {
      padding: 0 20px;
    }

    #text-nav {
      display: none;
    }

    #hamburger {
      display: flex;
    }

    h1 {
      font-size: 1.2rem;
      padding: 0 5px 5px 10px;
    }

    #logo {
      height: 50px;
    }
  }

  @media (max-width: 480px) {
    h1 {
      font-size: 1.2rem;
    }

    #logo {
      height: 50px;
    }
  }
</style>

<script>
  const hamburger = document.getElementById('hamburger');
  const sidebar = document.getElementById('mobile-sidebar');
  const overlay = document.getElementById('overlay');
  const mobileDropdown = document.querySelector('.mobile-dropdown');
  const mobileDropdownTrigger = document.querySelector('.mobile-dropdown-trigger');

  hamburger?.addEventListener('click', () => {
    hamburger.classList.toggle('active');
    sidebar?.classList.toggle('active');
    overlay?.classList.toggle('active');
  });

  overlay?.addEventListener('click', () => {
    hamburger?.classList.remove('active');
    sidebar?.classList.remove('active');
    overlay?.classList.remove('active');
  });

  mobileDropdownTrigger?.addEventListener('click', () => {
    mobileDropdown?.classList.toggle('active');
  });

  // Close sidebar when clicking a link
  const sidebarLinks = sidebar?.querySelectorAll('a');
  sidebarLinks?.forEach(link => {
    link.addEventListener('click', () => {
      hamburger?.classList.remove('active');
      sidebar?.classList.remove('active');
      overlay?.classList.remove('active');
    });
  });
</script>